-- Ganti dengan nama pemain asli (Client)
local ClientName = "akunoctora"

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local localPlayer = Players.LocalPlayer
local client = nil
local follow = false

local humanoid = nil
local myRootPart = nil

-- Debug log
local function debugPrint(msg)
	print("[DEBUG] " .. msg)
end

-- Update referensi karakter bot
local function updateBotRefs()
	local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
	humanoid = character:WaitForChild("Humanoid")
	myRootPart = character:WaitForChild("HumanoidRootPart")
end

-- Fungsi untuk jalan ke belakang client (jarak 5 studs)
local function followClient()
	if not client or not client.Character then return end
	local targetHRP = client.Character:FindFirstChild("HumanoidRootPart")
	if not targetHRP or not myRootPart then return end

	local targetPos = targetHRP.Position - targetHRP.CFrame.LookVector * 5

	-- Hanya bergerak kalau jaraknya lebih dari 2 studs
	if (myRootPart.Position - targetPos).Magnitude > 2 then
		humanoid:MoveTo(targetPos)
		debugPrint("Berjalan ke: " .. tostring(targetPos))
	end
end

-- Fungsi berhenti
local function stopFollowing()
	follow = false
	if humanoid and myRootPart then
		humanoid:MoveTo(myRootPart.Position) -- berhenti di tempat
	end
	debugPrint("Berhenti mengikuti.")
end

-- Saat client ditemukan
local function setupClient(player)
	if player.Name ~= ClientName then return end
	client = player
	debugPrint("Client ditemukan: " .. player.Name)

	-- Dengarkan perintah chat dari client
	client.Chatted:Connect(function(msg)
		if msg == "!ikuti" then
			follow = true
			debugPrint("Perintah !ikuti diterima")
		elseif msg == "!stop" then
			stopFollowing()
			debugPrint("Perintah !stop diterima")
		end
	end)
end

-- Pantau semua pemain
for _, p in ipairs(Players:GetPlayers()) do
	setupClient(p)
end

-- Pantau pemain baru yang join
Players.PlayerAdded:Connect(setupClient)

-- Update referensi saat karakter bot spawn
localPlayer.CharacterAdded:Connect(function()
	debugPrint("Karakter bot spawn ulang.")
	updateBotRefs()
end)

-- Inisialisasi awal
updateBotRefs()

-- Loop jalan setiap 0.5 detik
while true do
	task.wait(0.5)
	if follow then
		followClient()
	end
end
