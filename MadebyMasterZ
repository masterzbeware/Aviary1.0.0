local repo = "https://raw.githubusercontent.com/deividcomsono/Obsidian/main/"
local Library = loadstring(game:HttpGet(repo .. "Library.lua"))()

local Toggles = Library.Toggles

local Window = Library:CreateWindow({
    Title = "Radiology Autofarm",
    Footer = "by MasterZ",
    Icon = 0,
    NotifySide = "Right",
    ShowCustomCursor = true,
})

local Tabs = {
    Main = Window:AddTab("Main", "toggle-left"),
}

local GroupBox = Tabs.Main:AddLeftGroupbox("Autofarm")

local autofarmRadiology = false

GroupBox:AddToggle("RadiologyToggle", {
    Text = "Autofarm Radiology (Wedgera)",
    Default = false,
    Tooltip = "Tween ke 'Wedgera', trigger ClickDetector sampai Prompt aktif",
    Callback = function(value)
        autofarmRadiology = value
        if value then
            task.spawn(function()
                local TweenService = game:GetService("TweenService")
                local Players = game:GetService("Players")
                local player = Players.LocalPlayer
                local char = player.Character or player.CharacterAdded:Wait()
                local hrp = char:WaitForChild("HumanoidRootPart")

                local function tweenTo(part)
                    if not part then return end
                    local goal = { CFrame = part.CFrame + Vector3.new(0, 3, 0) }
                    local tween = TweenService:Create(hrp, TweenInfo.new(1, Enum.EasingStyle.Linear), goal)
                    tween:Play()
                    tween.Completed:Wait()
                end

                -- Ambil RadiologyRoom1 pertama
                local room
                for _, r in ipairs(workspace:WaitForChild("RadiologyRooms"):GetChildren()) do
                    if r:IsA("Model") and r.Name == "RadiologyRoom1" then
                        room = r
                        break
                    end
                end

                if not room then warn("RadiologyRoom1 tidak ditemukan.") return end

                -- Cari Part bernama "Wedgera"
                local wedgera = room:FindFirstChild("Wedgera", true)
                if not wedgera then warn("Part 'Wedgera' tidak ditemukan.") return end

                tweenTo(wedgera)

                -- Trigger ClickDetector di dalam "Wedgera"
                local detector = wedgera:FindFirstChildWhichIsA("ClickDetector", true)
                if not detector then warn("ClickDetector di Wedgera tidak ditemukan.") return end

                -- Ulang trigger sampai ProximityPrompt aktif
                local prompt
                local xrayBtn = room:FindFirstChild("X-Ray Button")
                if xrayBtn then
                    for _, part in ipairs(xrayBtn:GetChildren()) do
                        local p = part:FindFirstChildWhichIsA("ProximityPrompt")
                        if p then
                            prompt = p
                            break
                        end
                    end
                end

                if not prompt then warn("Prompt tidak ditemukan di X-Ray Button.") return end

                while autofarmRadiology and not prompt.Enabled do
                    pcall(function()
                        fireclickdetector(detector)
                    end)
                    wait(0.5)
                end

                if prompt.Enabled then
                    print("âœ… ProximityPrompt aktif! Selesai.")
                end
            end)
        end
    end
})
