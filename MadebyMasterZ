-- Ganti ini dengan nama pemain utama yang ingin diikuti
local ClientName = "akunoctora"

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local localPlayer = Players.LocalPlayer
local client = nil
local follow = false

local humanoid
local myRootPart

-- Fungsi debug log
local function debugPrint(msg)
	print("[DEBUG] " .. msg)
end

-- Update referensi karakter bot
local function updateCharacter()
	local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
	humanoid = character:WaitForChild("Humanoid")
	myRootPart = character:WaitForChild("HumanoidRootPart")
	humanoid.AutoRotate = true
	debugPrint("Bot siap digunakan.")
end

-- Fungsi gerak ke targetPos secara normal
local function moveTo(targetPos, faceTo)
	if humanoid and myRootPart then
		humanoid:MoveTo(targetPos)
		humanoid.AutoRotate = false -- agar bisa kita atur arah manual
		myRootPart.CFrame = CFrame.new(myRootPart.Position, faceTo.Position)
	end
end

-- Fungsi untuk mengikuti client
local function followClient()
	if not client or not client.Character then return end
	local targetHRP = client.Character:FindFirstChild("HumanoidRootPart")
	if not targetHRP or not myRootPart then return end

	-- Arah belakang dari client, hanya di sumbu horizontal
	local lookVector = Vector3.new(targetHRP.CFrame.LookVector.X, 0, targetHRP.CFrame.LookVector.Z).Unit
	local targetPos = targetHRP.Position - lookVector * 5 -- Jarak 5 studs di belakang

	moveTo(targetPos, targetHRP)
end

-- Fungsi ketika perintah chat diketik oleh client
local function monitorClient(player)
	if player.Name == ClientName then
		client = player
		debugPrint("Client ditemukan: " .. client.Name)

		player.Chatted:Connect(function(message)
			if message == "!ikuti" then
				follow = true
				debugPrint("Perintah !ikuti diterima.")
			elseif message == "!stop" then
				follow = false
				if humanoid then
					humanoid:MoveTo(myRootPart.Position) -- berhenti di tempat
					humanoid.AutoRotate = true
				end
				debugPrint("Perintah !stop diterima.")
			end
		end)
	end
end

-- Cek pemain yang sudah ada
for _, player in ipairs(Players:GetPlayers()) do
	monitorClient(player)
end

-- Pantau pemain baru masuk
Players.PlayerAdded:Connect(monitorClient)

-- Update karakter jika respawn
localPlayer.CharacterAdded:Connect(function()
	updateCharacter()
end)

-- Inisialisasi awal
updateCharacter()

-- Loop utama
while true do
	task.wait(0.5) -- setengah detik biar ringan
	if follow then
		followClient()
	end
end
