-- Ganti dengan nama pemain asli yang ingin diikuti
local ClientName = "akunoctora"

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local localPlayer = Players.LocalPlayer
local client = nil
local follow = false
local baris = false

-- Debug
local function debugPrint(msg)
	print("[DEBUG] " .. msg)
end

-- Fungsi ikuti client
local function followClient()
	if not client or not client.Character or not localPlayer.Character then
		debugPrint("Follow gagal: karakter belum siap")
		return
	end
	local hrp = localPlayer.Character:FindFirstChild("HumanoidRootPart")
	local targetHrp = client.Character:FindFirstChild("HumanoidRootPart")
	if hrp and targetHrp then
		local followPos = targetHrp.Position - (targetHrp.CFrame.LookVector * 5)
		hrp.CFrame = CFrame.new(followPos, targetHrp.Position)
		debugPrint("Mengikuti client ke posisi: " .. tostring(followPos))
	end
end

-- Formasi baris (optional)
local function barisFormasi()
	if not client or not client.Character or not localPlayer.Character then
		debugPrint("Baris gagal: karakter belum siap")
		return
	end
	local hrp = localPlayer.Character:FindFirstChild("HumanoidRootPart")
	local targetHrp = client.Character:FindFirstChild("HumanoidRootPart")
	if hrp and targetHrp then
		local barisPos = targetHrp.Position - targetHrp.CFrame.LookVector * 3
		hrp.CFrame = CFrame.new(barisPos, targetHrp.Position)
		debugPrint("Formasi baris ke posisi: " .. tostring(barisPos))
	end
end

-- Pantau semua pemain yang masuk, dan cek siapa client-nya
local function onPlayerAdded(player)
	if player.Name == ClientName then
		client = player
		debugPrint("Client ditemukan: " .. client.Name)

		player.Chatted:Connect(function(message)
			if message == "!ikuti" then
				follow = true
				baris = false
				debugPrint("Perintah diterima: !ikuti")
			elseif message == "!baris" then
				baris = true
				follow = false
				debugPrint("Perintah diterima: !baris")
			else
				debugPrint("Pesan dari client: " .. message)
			end
		end)
	end
end

-- Pas script dijalankan, cek semua pemain
for _, player in pairs(Players:GetPlayers()) do
	onPlayerAdded(player)
end

-- Pantau pemain baru yang join
Players.PlayerAdded:Connect(onPlayerAdded)

-- Loop per frame
RunService.RenderStepped:Connect(function()
	if follow then
		followClient()
	elseif baris then
		barisFormasi()
	end
end)
