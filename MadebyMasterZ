-- Ganti nama Client di bawah ini dengan nama pemain yang ingin diikuti
local ClientName = "NamaPemainClient"

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local localPlayer = Players.LocalPlayer
local client = nil
local follow = false
local baris = false

-- Fungsi untuk mencari client
local function findClient()
	for _, player in pairs(Players:GetPlayers()) do
		if player.Name == ClientName then
			client = player
			break
		end
	end
end

-- Fungsi untuk mengikuti client dari belakang dengan jarak 5 studs
local function followClient()
	if not client or not client.Character or not localPlayer.Character then return end
	local hrp = localPlayer.Character:FindFirstChild("HumanoidRootPart")
	local targetHrp = client.Character:FindFirstChild("HumanoidRootPart")
	if hrp and targetHrp then
		local followPos = targetHrp.Position - (targetHrp.CFrame.LookVector * 5)
		hrp.CFrame = CFrame.new(followPos, targetHrp.Position) -- menghadap ke client
	end
end

-- Fungsi untuk formasi baris
local function barisFormasi()
	if not client or not client.Character or not localPlayer.Character then return end
	local hrp = localPlayer.Character:FindFirstChild("HumanoidRootPart")
	local targetHrp = client.Character:FindFirstChild("HumanoidRootPart")
	if hrp and targetHrp then
		local formasiPos = targetHrp.Position - targetHrp.CFrame.LookVector * 3
		hrp.CFrame = CFrame.new(formasiPos, targetHrp.Position)
	end
end

-- Deteksi saat client join
Players.PlayerAdded:Connect(function(player)
	if player.Name == ClientName then
		client = player
	end
end)

-- Deteksi perintah chat
Players.PlayerChatted:Connect(function(player, message)
	if player.Name == ClientName then
		if message == "!ikuti" then
			follow = true
			baris = false
		elseif message == "!baris" then
			baris = true
			follow = false
		end
	end
end)

-- Jalankan loop setiap frame
RunService.RenderStepped:Connect(function()
	if follow then
		followClient()
	elseif baris then
		barisFormasi()
	end
end)

-- Cari client saat script dijalankan
findClient()
