local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

-- Fungsi Tween ke Part
local function tweenTo(part)
	if not part then return end
	local goal = { CFrame = part.CFrame + Vector3.new(0, 3, 0) }
	local tween = TweenService:Create(hrp, TweenInfo.new(1, Enum.EasingStyle.Linear), goal)
	tween:Play()
	tween.Completed:Wait()
end

-- Cari satu RadiologyRoom1 secara acak
local roomList = workspace:WaitForChild("RadiologyRooms"):GetChildren()
local selectedRoom
for _, room in ipairs(roomList) do
	if room:IsA("Model") and room.Name == "RadiologyRoom1" then
		selectedRoom = room
		break -- Ambil yang pertama ditemukan
	end
end

if not selectedRoom then
	warn("RadiologyRoom1 tidak ditemukan.")
	return
end

-- Cari Part yang punya ClickDetector di dalam X-Ray Machine
local clickPart
local xrayMachine = selectedRoom:FindFirstChild("X-Ray (with CXR and table) Machine", true)
if xrayMachine then
	local xraySub = xrayMachine:FindFirstChild("X-Ray Machine")
	if xraySub then
		for _, part in ipairs(xraySub:GetDescendants()) do
			if part:IsA("ClickDetector") then
				clickPart = part.Parent
				break
			end
		end
	end
end

if not clickPart then
	warn("ClickDetector tidak ditemukan.")
	return
end

-- Tween ke Part, lalu trigger ClickDetector berulang
tweenTo(clickPart)

for i = 1, 5 do
	pcall(function()
		fireclickdetector(clickPart:FindFirstChildWhichIsA("ClickDetector"))
	end)
	wait(0.5)
end

-- Tunggu sampai ProximityPrompt di X-Ray Button menjadi Enabled
local prompt
local xrayButton = selectedRoom:FindFirstChild("X-Ray Button")
if xrayButton then
	for _, part in ipairs(xrayButton:GetChildren()) do
		local prox = part:FindFirstChildWhichIsA("ProximityPrompt")
		if prox then
			prompt = prox
			break
		end
	end
end

if not prompt then
	warn("ProximityPrompt di X-Ray Button tidak ditemukan.")
	return
end

repeat
	print("Menunggu prompt aktif...")
	wait(0.5)
until prompt.Enabled

print("Prompt aktif! Siap ke step selanjutnya.")
